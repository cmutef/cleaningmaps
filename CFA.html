<html>
<head>
    <style>
        body {
        	font-family:"Arial", Helvetica, sans-serif;
        	color: #990000;
        }
        td {
        	width:200px;
        	height:100px;
        	border: 1px solid black;
        	text-align:center;
        }
        #blank {
        	border: none;
        }
        #title {
        	border: none;
        	text-align:left;
        }
    </style>
</head>
<body>
<table>
	<tr>
		<td id="title" colspan="2">
			<h3>CFA318</h3>
		</td>
	</tr>
	<tr>
		<td id="CFA318-I1">
		</td>
		<td id="blank">
		</td>
		<td id="CFA318-14">
		</td>
		<td id="CFA318-15">
		</td>
		<td id="CFA318-16">
		</td>
		<td id="CFA318-17">
		</td>
		<td id="CFA318-18">
		</td>
		<td id="CFA318-19">
		</td>
		<td id="CFA318-20">
		</td>
	</tr>
	<tr>
		<td id="blank">
		</td>
		<td id="blank">
		</td>
		<td id="CFA318-13">
		</td>
		<td id="CFA318-12">
		</td>
		<td id="CFA318-11">
		</td>
		<td id="CFA318-10">
		</td>
		<td id="CFA318-09">
		</td>
		<td id="CFA318-08">
		</td>
		<td id="CFA318-07">
		</td>
	</tr>
	<tr>
		<td id="blank">
		</td>
		<td id="blank">
		</td>
		<td id="CFA318-SCANNER">
		</td>
		<td id="CFA318-01">
		</td>
		<td id="CFA318-02">
		</td>
		<td id="CFA318-03">
		</td>
		<td id="CFA318-04">
		</td>
		<td id="CFA318-05">
		</td>
		<td id="CFA318-06">
		</td>
	</tr>
	<tr>
		<td id="title" colspan="2">
			<h3>CFA323</h3>
		</td>
	</tr>
	<tr>
		<td id="blank">
		</td>
		<td id="blank">
		</td>
		<td id="CFA323-08">
		</td>
		<td id="CFA323-03">
		</td>
		<td id="blank">
		</td>
		<td id="blank">
		</td>
	</tr>
	<tr>
		<td id="CFA323-09">
		</td>
		<td id="blank">
		</td>
		<td id="CFA323-07">
		</td>
		<td id="CFA323-04">
		</td>
		<td id="blank">
		</td>
		<td id="CFA323-02">
		</td>
	</tr>
	<tr>
		<td id="CFA323-10">
		</td>
		<td id="blank">
		</td>
		<td id="CFA323-06">
		</td>
		<td id="CFA323-05">
		</td>
		<td id="blank">
		</td>
		<td id="blank">
		</td>
	</tr>
	<tr>
		<td id="blank">
		</td>
		<td id="blank">
		</td>
		<td id="blank">
		</td>
		<td id="blank">
		</td>
		<td id="CFA323-01">
		</td>
		<td id="blank">
		</td>
	</tr>
	<tr>
		<td id="title" colspan="2">
			<h3>CFA317</h3>
		</td>
	</tr>
	<tr>
        <td id="CFA317-20">
        </td>
        <td id="CFA317-19">
        </td>
        <td id="CFA317-18">
        </td>
        <td id="CFA317-17">
        </td>
        <td id="CFA317-16">
        </td>
        <td id="CFA317-15">
        </td>
        <td id="CFA317-14">
        </td>
	</tr>
	<tr>
        <td id="CFA317-07">
        </td>
        <td id="CFA317-08">
        </td>
        <td id="CFA317-09">
        </td>
        <td id="CFA317-10">
        </td>
        <td id="CFA317-11">
        </td>
        <td id="CFA317-12">
        </td>
        <td id="CFA317-13">
        </td>
	</tr>
	<tr>
        <td id="CFA317-06">
        </td>
        <td id="CFA317-05">
        </td>
        <td id="CFA317-04">
        </td>
        <td id="CFA317-03">
        </td>
        <td id="CFA317-02">
        </td>
        <td id="CFA317-01">
        </td>
        <td id="CFA317-SCANNER">
        </td>
	</tr>
	<tr>
		<td id="title" colspan="2">
			<h3>CFA319 Hallway</h3>
		</td>
	</tr>
	<tr>
        <td id="CFA-WEB02">
        </td>
        <td id="CFA-WEB01">
        </td>
        <td id="rs-cl-cfa-a">
        </td>
        <td id="prn-cl-cfa-1">
        </td>
        <td id="blank">
		</td>
		<td id="blank">
		</td>
		<td id="prn-cl-cfa-c">
		</td>
	</tr>
	<tr>
		<td id="title" colspan="2">
			<h3>CFA322 Ccon Office</h3>
		</td>
	</tr>
	<tr>
		<td id="CFA322-CC1">
		</id>
	</tr>
	<tr>
		<td id="title" colspan="2">
			<h3>CFA321 Sound Room</h3>
		</td>
	</tr>
	<tr>
		<td id="CFA321-01">
		</id>
	</tr>
		<tr>
		<td id="title" colspan="2">
			<h3>CFA320 Multimedia Administrator Office</h3>
		</td>
	</tr>
	<tr>
		<td id="CFA320-CC1">
		</id>
		<td id="CFA320-CC2">
		</id>
	</tr>
</table>

<script src="//code.jquery.com/jquery-1.11.0.min.js"></script>

<script>
var oneDay = 24*60*60*1000;

$.get( "/CFAdata", function(data) {

  data.forEach(function(entry){
  	var d = entry.date;
  	$("#"+entry.name).html(entry.name + "</br>" + entry.andrew + "</br>" + d.substring(0, d.search("T")));

  	var firstDate = Date.parse(new Date().toString());
  	var secondDate = Date.parse(d);

    var diffDays = Math.round(Math.abs((firstDate - secondDate)/(oneDay)));

    var color = 255 - 3*diffDays;
    if(color < 0) color = 0;
  	$("#"+entry.name).css("background-color", "rgb("+color+","+color+","+color+")");
  });
});

$("td").each(function(index){
	$(this).click(function(){
		$.post("/CFAdata", "name="+$(this).attr("id"))
		.done(function(){
			location.reload();
		});
	});
});

</script>

</body>
</html>